<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <title>WASM Metadata</title>
</head>

<body>
    <input type="file" id="file-selector" accept=".wasm, .wasi">
    <p id="meta_input">Meta input: </p>
    <p id="meta_output">Meta output: </p>
    <script src="./bundle.js"></script>
    <script>
        const fileSelector = document.getElementById('file-selector');
        fileSelector.addEventListener('change', (event) => {
            const fileList = event.target.files;
            console.log(fileList);
            readFile(fileList[0])
        });

        function readFile(file) {
            const reader = new FileReader();
            reader.addEventListener('load', (event) => {
                var wasmBytes = event.target.result;
                console.log(window.getWasmMetadata);

                window.getWasmMetadata(wasmBytes).then(metadata => {

                    console.log(metadata);

                    document.getElementById("meta_input").innerHTML += metadata.input;
                    document.getElementById("meta_output").innerHTML += metadata.output;


                });
            });

            reader.readAsArrayBuffer(file);

        }
    </script>
</body>

</html>