[package]
name = "gstd"
description = "Gear programs standard library"
keywords = ["gear", "std", "no-std", "wasm", "smart-contracts"]
categories = ["api-bindings"]
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true

[dependencies]
arrayvec = { version = "0.7.4", default-features = false, optional = true }
document-features = { version = "0.2.7", optional = true }
galloc.workspace = true
gcore = { workspace = true, features = ["codec"] }
gstd-codegen = { path = "codegen" }
gear-core-errors.workspace = true
hashbrown.workspace = true
bs58 = { workspace = true, features = ["alloc"] }
hex = { workspace = true, features = ["alloc"] }
parity-scale-codec = { workspace = true, features = ["derive"] }
primitive-types = { workspace = true, features = ["scale-info"] }
rustversion = { version = "1.0", optional = true }
scale-info = { workspace = true, features = ["derive"] }
futures = { workspace = true, features = ["alloc"] }

static_assertions.workspace = true

[dev-dependencies]
rustversion = "1.0"

[features]
#! ## Default features

default = ["common-handlers"]
## When enabled, a panic handler and an OOM error handler are provided by this crate.
## Note that the OOM error handler is provided when "nightly" feature is enabled.
common-handlers = []

#! ## Nightly features

## Enables all features below.
## These features depend on unstable Rust API and require nightly toolchain.
nightly = ["panic-messages", "oom-handler"]
## When enabled, additional context information is available from
## panic messages in debug mode. Relies on [`panic_info_message`][rust-66745].
panic-messages = []
## When enabled, an OOM error handler is provided.
## Relies on [`alloc_error_handler`][rust-51540],
oom-handler = []

#! ## Additional features

## Enables debug logging; this heavily impacts gas cost 
## and is therefore disabled by default.
debug = ["galloc/debug", "gcore/debug", "arrayvec", "rustversion"]

#! [rust-66745]: https://github.com/rust-lang/rust/issues/66745
#! [rust-51540]: https://github.com/rust-lang/rust/issues/51540

[package.metadata.docs.rs]
all-features = true
